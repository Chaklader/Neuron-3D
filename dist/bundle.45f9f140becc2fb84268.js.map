{"version":3,"file":"bundle.45f9f140becc2fb84268.js","mappings":"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","sources":["webpack://neuron/./src/main.js"],"sourcesContent":["let ROOM_TO_MODEL = new Map([\n  [\n    \"Room 0\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/entity-classvaluation-1/4869-regal-dr--bonita-springs--fl-34134--usa/no-unit/26/primary/above-grade/level-1/clones/pool/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 21\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-1/clones/vip/model/iteration_30000.splat\",\n  ],\n\n  [\n    \"Room 20\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-1/clones/club-room/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 4\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/27/365-5th-ave-s--naples--fl-34102--usa/301/primary/above-grade/level-1/clones/livingroomnew/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 32\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/602-banyan-blvd--naples--fl-34102--usa/no-unit/secondary/detached-garage/above-grade/level-1/clones/room/model/iteration_30000.splat\",\n  ],\n\n  [\n    \"Room 12\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-2/clones/fitness/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 13\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-2/clones/lounge---loft/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 14\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-2/clones/bedroom-3---remote-retake/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 15\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-2/clones/m-bar-hallway/model/iteration_30000.splat\",\n  ],\n\n  [\n    \"Room 22\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-1/clones/bath-6-wic/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 23\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-1/clones/garage/model/iteration_30000.splat\",\n  ],\n  [\n    \"Room 24\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/584-banyan-blvd--naples--fl-34102--usa/no-unit/primary/above-grade/level-1/clones/prinary-closet/model/iteration_30000.splat\",\n  ],\n\n  [\n    \"Room 31\",\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/no-entity/26/3396-crayton-rd--naples--fl-34103--usa/no-unit/primary/above-grade/level-1/clones/living-room/model/iteration_30000.splat\",\n  ],\n]);\n\nlet cameras = [\n  {\n    id: 0,\n    img_name: \"00002\",\n    width: 1959,\n    height: 1090,\n    position: [-3.0089893469241797, -0.11086489695181866, -3.7527640949141428],\n    rotation: [\n      [0.876134201218856, 0.06925962026449776, 0.47706599800804744],\n      [-0.04747421839895102, 0.9972110940209488, -0.057586739349882114],\n      [-0.4797239414934443, 0.027805376500959853, 0.8769787916452908],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 1,\n    img_name: \"00009\",\n    width: 1959,\n    height: 1090,\n    position: [-2.5199776022057296, -0.09704735754873686, -3.6247725540304545],\n    rotation: [\n      [0.9982731285632193, -0.011928707708098955, -0.05751927260507243],\n      [0.0065061360949636325, 0.9955928229282383, -0.09355533724430458],\n      [0.058381769258182864, 0.09301955098900708, 0.9939511719154457],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 2,\n    img_name: \"00017\",\n    width: 1959,\n    height: 1090,\n    position: [-0.7737533667465242, -0.3364271945329695, -2.9358969417573753],\n    rotation: [\n      [0.9998813418672372, 0.013742375651625236, -0.0069605529394208224],\n      [-0.014268370388586709, 0.996512943252834, -0.08220929105659476],\n      [0.00580653013657589, 0.08229885200307129, 0.9965907801935302],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 3,\n    img_name: \"00025\",\n    width: 1959,\n    height: 1090,\n    position: [1.2198221749590001, -0.2196687861401182, -2.3183162007028453],\n    rotation: [\n      [0.9208648867765482, 0.0012010625395201253, 0.389880004297208],\n      [-0.06298204172269357, 0.987319521752825, 0.14571693239364383],\n      [-0.3847611242348369, -0.1587410451475895, 0.9092635249821667],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 4,\n    img_name: \"00033\",\n    width: 1959,\n    height: 1090,\n    position: [1.742387858893817, -0.13848225198886954, -2.0566370113193146],\n    rotation: [\n      [0.24669889292141334, -0.08370189346592856, -0.9654706879349405],\n      [0.11343747891376445, 0.9919082664242816, -0.05700815184573074],\n      [0.9624300466054861, -0.09545671285663988, 0.2541976029815521],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 5,\n    img_name: \"00041\",\n    width: 1959,\n    height: 1090,\n    position: [3.6567309419223935, -0.16470990600750707, -1.3458085590422042],\n    rotation: [\n      [0.2341293058324528, -0.02968330457755884, -0.9717522161434825],\n      [0.10270823606832301, 0.99469554638321, -0.005638106875665722],\n      [0.9667649592295676, -0.09848690996657204, 0.2359360976431732],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 6,\n    img_name: \"00049\",\n    width: 1959,\n    height: 1090,\n    position: [3.9013554243203497, -0.2597500978038105, -0.8106154188297828],\n    rotation: [\n      [0.6717235545638952, -0.015718162115524837, -0.7406351366386528],\n      [0.055627354673906296, 0.9980224478387622, 0.029270992841185218],\n      [0.7387104058127439, -0.060861588786650656, 0.6712695459756353],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 7,\n    img_name: \"00057\",\n    width: 1959,\n    height: 1090,\n    position: [4.742994605467533, -0.05591660945412069, 0.9500365976084458],\n    rotation: [\n      [-0.17042655709210375, 0.01207080756938, -0.9852964448542146],\n      [0.1165090336695526, 0.9931575292530063, -0.00798543433078162],\n      [0.9784581921120181, -0.1161568667478904, -0.1706667764862097],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 8,\n    img_name: \"00065\",\n    width: 1959,\n    height: 1090,\n    position: [4.34676307626522, 0.08168160516967145, 1.0876221470355405],\n    rotation: [\n      [-0.003575447631888379, -0.044792503246552894, -0.9989899137764799],\n      [0.10770152645126597, 0.9931680875192705, -0.04491693593046672],\n      [0.9941768441149182, -0.10775333677534978, 0.0012732004866391048],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n  {\n    id: 9,\n    img_name: \"00073\",\n    width: 1959,\n    height: 1090,\n    position: [3.264984351114202, 0.078974937336732, 1.0117200284114904],\n    rotation: [\n      [-0.026919994628162257, -0.1565891128261527, -0.9872968974090509],\n      [0.08444552208239385, 0.983768234577625, -0.1583319754069128],\n      [0.9960643893290491, -0.0876350978794554, -0.013259786205163005],\n    ],\n    fy: 1164.6601287484507,\n    fx: 1159.5880733038064,\n  },\n];\n\ncameras = [\n  { fx: 500, fy: 500, position: [0, 0, 0], rotation: [0, 0, 0] },\n  { fx: 500, fy: 500, position: [1, 1, 1], rotation: [0, 1, 0] },\n  { fx: 500, fy: 500, position: [2, 2, 2], rotation: [1, 0, 0] },\n  { fx: 500, fy: 500, position: [3, 3, 3], rotation: [0, 0, 1] },\n  { fx: 500, fy: 500, position: [4, 4, 4], rotation: [1, 1, 0] },\n];\n\nlet camera = cameras[1];\n\nfunction getProjectionMatrix(fx, fy, width, height) {\n  const znear = 0.2;\n  const zfar = 200;\n  return [\n    [(2 * fx) / width, 0, 0, 0],\n    [0, -(2 * fy) / height, 0, 0],\n    [0, 0, zfar / (zfar - znear), 1],\n    [0, 0, -(zfar * znear) / (zfar - znear), 0],\n  ].flat();\n}\n\n// function getViewMatrix(camera) {\n//   const R = camera.rotation.flat();\n//   const t = camera.position;\n//   const camToWorld = [\n//     [R[0], R[1], R[2], 0],\n//     [R[3], R[4], R[5], 0],\n//     [R[6], R[7], R[8], 0],\n//     [\n//       -t[0] * R[0] - t[1] * R[3] - t[2] * R[6],\n//       -t[0] * R[1] - t[1] * R[4] - t[2] * R[7],\n//       -t[0] * R[2] - t[1] * R[5] - t[2] * R[8],\n//       1,\n//     ],\n//   ].flat();\n//   return camToWorld;\n// }\n\nfunction getViewMatrix(camera) {\n  if (!camera || !camera.rotation || !camera.position) {\n    // Return a default view matrix if the camera object is invalid\n    return [\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0, 1, 0,\n      0, 0, 0, 1,\n    ];\n  }\n\n  const R = camera.rotation.flat();\n  const t = camera.position;\n  const camToWorld = [\n    [R[0], R[1], R[2], 0],\n    [R[3], R[4], R[5], 0],\n    [R[6], R[7], R[8], 0],\n    [\n      -t[0] * R[0] - t[1] * R[3] - t[2] * R[6],\n      -t[0] * R[1] - t[1] * R[4] - t[2] * R[7],\n      -t[0] * R[2] - t[1] * R[5] - t[2] * R[8],\n      1,\n    ],\n  ].flat();\n  return camToWorld;\n}\n\nfunction multiply4(a, b) {\n  return [\n    b[0] * a[0] + b[1] * a[4] + b[2] * a[8] + b[3] * a[12],\n    b[0] * a[1] + b[1] * a[5] + b[2] * a[9] + b[3] * a[13],\n    b[0] * a[2] + b[1] * a[6] + b[2] * a[10] + b[3] * a[14],\n    b[0] * a[3] + b[1] * a[7] + b[2] * a[11] + b[3] * a[15],\n    b[4] * a[0] + b[5] * a[4] + b[6] * a[8] + b[7] * a[12],\n    b[4] * a[1] + b[5] * a[5] + b[6] * a[9] + b[7] * a[13],\n    b[4] * a[2] + b[5] * a[6] + b[6] * a[10] + b[7] * a[14],\n    b[4] * a[3] + b[5] * a[7] + b[6] * a[11] + b[7] * a[15],\n    b[8] * a[0] + b[9] * a[4] + b[10] * a[8] + b[11] * a[12],\n    b[8] * a[1] + b[9] * a[5] + b[10] * a[9] + b[11] * a[13],\n    b[8] * a[2] + b[9] * a[6] + b[10] * a[10] + b[11] * a[14],\n    b[8] * a[3] + b[9] * a[7] + b[10] * a[11] + b[11] * a[15],\n    b[12] * a[0] + b[13] * a[4] + b[14] * a[8] + b[15] * a[12],\n    b[12] * a[1] + b[13] * a[5] + b[14] * a[9] + b[15] * a[13],\n    b[12] * a[2] + b[13] * a[6] + b[14] * a[10] + b[15] * a[14],\n    b[12] * a[3] + b[13] * a[7] + b[14] * a[11] + b[15] * a[15],\n  ];\n}\n\nfunction invert4(a) {\n  let b00 = a[0] * a[5] - a[1] * a[4];\n  let b01 = a[0] * a[6] - a[2] * a[4];\n  let b02 = a[0] * a[7] - a[3] * a[4];\n  let b03 = a[1] * a[6] - a[2] * a[5];\n  let b04 = a[1] * a[7] - a[3] * a[5];\n  let b05 = a[2] * a[7] - a[3] * a[6];\n  let b06 = a[8] * a[13] - a[9] * a[12];\n  let b07 = a[8] * a[14] - a[10] * a[12];\n  let b08 = a[8] * a[15] - a[11] * a[12];\n  let b09 = a[9] * a[14] - a[10] * a[13];\n  let b10 = a[9] * a[15] - a[11] * a[13];\n  let b11 = a[10] * a[15] - a[11] * a[14];\n  let det =\n    b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) return null;\n  return [\n    (a[5] * b11 - a[6] * b10 + a[7] * b09) / det,\n    (a[2] * b10 - a[1] * b11 - a[3] * b09) / det,\n    (a[13] * b05 - a[14] * b04 + a[15] * b03) / det,\n    (a[10] * b04 - a[9] * b05 - a[11] * b03) / det,\n    (a[6] * b08 - a[4] * b11 - a[7] * b07) / det,\n    (a[0] * b11 - a[2] * b08 + a[3] * b07) / det,\n    (a[14] * b02 - a[12] * b05 - a[15] * b01) / det,\n    (a[8] * b05 - a[10] * b02 + a[11] * b01) / det,\n    (a[4] * b10 - a[5] * b08 + a[7] * b06) / det,\n    (a[1] * b08 - a[0] * b10 - a[3] * b06) / det,\n    (a[12] * b04 - a[13] * b02 + a[15] * b00) / det,\n    (a[9] * b02 - a[8] * b04 - a[11] * b00) / det,\n    (a[5] * b07 - a[4] * b09 - a[6] * b06) / det,\n    (a[0] * b09 - a[1] * b07 + a[2] * b06) / det,\n    (a[13] * b01 - a[12] * b03 - a[14] * b00) / det,\n    (a[8] * b03 - a[9] * b01 + a[10] * b00) / det,\n  ];\n}\n\nfunction rotate4(a, rad, x, y, z) {\n  let len = Math.hypot(x, y, z);\n  x /= len;\n  y /= len;\n  z /= len;\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let t = 1 - c;\n  let b00 = x * x * t + c;\n  let b01 = y * x * t + z * s;\n  let b02 = z * x * t - y * s;\n  let b10 = x * y * t - z * s;\n  let b11 = y * y * t + c;\n  let b12 = z * y * t + x * s;\n  let b20 = x * z * t + y * s;\n  let b21 = y * z * t - x * s;\n  let b22 = z * z * t + c;\n  return [\n    a[0] * b00 + a[4] * b01 + a[8] * b02,\n    a[1] * b00 + a[5] * b01 + a[9] * b02,\n    a[2] * b00 + a[6] * b01 + a[10] * b02,\n    a[3] * b00 + a[7] * b01 + a[11] * b02,\n    a[0] * b10 + a[4] * b11 + a[8] * b12,\n    a[1] * b10 + a[5] * b11 + a[9] * b12,\n    a[2] * b10 + a[6] * b11 + a[10] * b12,\n    a[3] * b10 + a[7] * b11 + a[11] * b12,\n    a[0] * b20 + a[4] * b21 + a[8] * b22,\n    a[1] * b20 + a[5] * b21 + a[9] * b22,\n    a[2] * b20 + a[6] * b21 + a[10] * b22,\n    a[3] * b20 + a[7] * b21 + a[11] * b22,\n    ...a.slice(12, 16),\n  ];\n}\n\nfunction translate4(a, x, y, z) {\n  return [\n    ...a.slice(0, 12),\n    a[0] * x + a[4] * y + a[8] * z + a[12],\n    a[1] * x + a[5] * y + a[9] * z + a[13],\n    a[2] * x + a[6] * y + a[10] * z + a[14],\n    a[3] * x + a[7] * y + a[11] * z + a[15],\n  ];\n}\n\nfunction createWorker(self) {\n  let buffer;\n  let vertexCount = 0;\n  let viewProj;\n  // 6*4 + 4 + 4 = 8*4\n  // XYZ - Position (Float32)\n  // XYZ - Scale (Float32)\n  // RGBA - colors (uint8)\n  // IJKL - quaternion/rot (uint8)\n  const rowLength = 3 * 4 + 3 * 4 + 4 + 4;\n  let lastProj = [];\n  let depthIndex = new Uint32Array();\n  let lastVertexCount = 0;\n\n  var _floatView = new Float32Array(1);\n  var _int32View = new Int32Array(_floatView.buffer);\n\n  function floatToHalf(float) {\n    _floatView[0] = float;\n    var f = _int32View[0];\n\n    var sign = (f >> 31) & 0x0001;\n    var exp = (f >> 23) & 0x00ff;\n    var frac = f & 0x007fffff;\n\n    var newExp;\n    if (exp == 0) {\n      newExp = 0;\n    } else if (exp < 113) {\n      newExp = 0;\n      frac |= 0x00800000;\n      frac = frac >> (113 - exp);\n      if (frac & 0x01000000) {\n        newExp = 1;\n        frac = 0;\n      }\n    } else if (exp < 142) {\n      newExp = exp - 112;\n    } else {\n      newExp = 31;\n      frac = 0;\n    }\n\n    return (sign << 15) | (newExp << 10) | (frac >> 13);\n  }\n\n  function packHalf2x16(x, y) {\n    return (floatToHalf(x) | (floatToHalf(y) << 16)) >>> 0;\n  }\n\n  function generateTexture() {\n    if (!buffer) return;\n    const f_buffer = new Float32Array(buffer);\n    const u_buffer = new Uint8Array(buffer);\n\n    var texwidth = 1024 * 2; // Set to your desired width\n    var texheight = Math.ceil((2 * vertexCount) / texwidth); // Set to your desired height\n    var texdata = new Uint32Array(texwidth * texheight * 4); // 4 components per pixel (RGBA)\n    var texdata_c = new Uint8Array(texdata.buffer);\n    var texdata_f = new Float32Array(texdata.buffer);\n\n    // Here we convert from a .splat file buffer into a texture\n    // With a little bit more foresight perhaps this texture file\n    // should have been the native format as it'd be very easy to\n    // load it into webgl.\n    for (let i = 0; i < vertexCount; i++) {\n      // x, y, z\n      texdata_f[8 * i + 0] = f_buffer[8 * i + 0];\n      texdata_f[8 * i + 1] = f_buffer[8 * i + 1];\n      texdata_f[8 * i + 2] = f_buffer[8 * i + 2];\n\n      // r, g, b, a\n      texdata_c[4 * (8 * i + 7) + 0] = u_buffer[32 * i + 24 + 0];\n      texdata_c[4 * (8 * i + 7) + 1] = u_buffer[32 * i + 24 + 1];\n      texdata_c[4 * (8 * i + 7) + 2] = u_buffer[32 * i + 24 + 2];\n      texdata_c[4 * (8 * i + 7) + 3] = u_buffer[32 * i + 24 + 3];\n\n      // quaternions\n      let scale = [\n        f_buffer[8 * i + 3 + 0],\n        f_buffer[8 * i + 3 + 1],\n        f_buffer[8 * i + 3 + 2],\n      ];\n      let rot = [\n        (u_buffer[32 * i + 28 + 0] - 128) / 128,\n        (u_buffer[32 * i + 28 + 1] - 128) / 128,\n        (u_buffer[32 * i + 28 + 2] - 128) / 128,\n        (u_buffer[32 * i + 28 + 3] - 128) / 128,\n      ];\n\n      // Compute the matrix product of S and R (M = S * R)\n      const M = [\n        1.0 - 2.0 * (rot[2] * rot[2] + rot[3] * rot[3]),\n        2.0 * (rot[1] * rot[2] + rot[0] * rot[3]),\n        2.0 * (rot[1] * rot[3] - rot[0] * rot[2]),\n\n        2.0 * (rot[1] * rot[2] - rot[0] * rot[3]),\n        1.0 - 2.0 * (rot[1] * rot[1] + rot[3] * rot[3]),\n        2.0 * (rot[2] * rot[3] + rot[0] * rot[1]),\n\n        2.0 * (rot[1] * rot[3] + rot[0] * rot[2]),\n        2.0 * (rot[2] * rot[3] - rot[0] * rot[1]),\n        1.0 - 2.0 * (rot[1] * rot[1] + rot[2] * rot[2]),\n      ].map((k, i) => k * scale[Math.floor(i / 3)]);\n\n      const sigma = [\n        M[0] * M[0] + M[3] * M[3] + M[6] * M[6],\n        M[0] * M[1] + M[3] * M[4] + M[6] * M[7],\n        M[0] * M[2] + M[3] * M[5] + M[6] * M[8],\n        M[1] * M[1] + M[4] * M[4] + M[7] * M[7],\n        M[1] * M[2] + M[4] * M[5] + M[7] * M[8],\n        M[2] * M[2] + M[5] * M[5] + M[8] * M[8],\n      ];\n\n      texdata[8 * i + 4] = packHalf2x16(4 * sigma[0], 4 * sigma[1]);\n      texdata[8 * i + 5] = packHalf2x16(4 * sigma[2], 4 * sigma[3]);\n      texdata[8 * i + 6] = packHalf2x16(4 * sigma[4], 4 * sigma[5]);\n    }\n\n    self.postMessage({ texdata, texwidth, texheight }, [texdata.buffer]);\n  }\n\n  function runSort(viewProj) {\n    if (!buffer) return;\n    const f_buffer = new Float32Array(buffer);\n    if (lastVertexCount == vertexCount) {\n      let dot =\n        lastProj[2] * viewProj[2] +\n        lastProj[6] * viewProj[6] +\n        lastProj[10] * viewProj[10];\n      if (Math.abs(dot - 1) < 0.01) {\n        return;\n      }\n    } else {\n      generateTexture();\n      lastVertexCount = vertexCount;\n    }\n\n    console.time(\"sort\");\n    let maxDepth = -Infinity;\n    let minDepth = Infinity;\n    let sizeList = new Int32Array(vertexCount);\n    for (let i = 0; i < vertexCount; i++) {\n      let depth =\n        ((viewProj[2] * f_buffer[8 * i + 0] +\n          viewProj[6] * f_buffer[8 * i + 1] +\n          viewProj[10] * f_buffer[8 * i + 2]) *\n          4096) |\n        0;\n      sizeList[i] = depth;\n      if (depth > maxDepth) maxDepth = depth;\n      if (depth < minDepth) minDepth = depth;\n    }\n\n    // This is a 16 bit single-pass counting sort\n    let depthInv = (256 * 256) / (maxDepth - minDepth);\n    let counts0 = new Uint32Array(256 * 256);\n    for (let i = 0; i < vertexCount; i++) {\n      sizeList[i] = ((sizeList[i] - minDepth) * depthInv) | 0;\n      counts0[sizeList[i]]++;\n    }\n    let starts0 = new Uint32Array(256 * 256);\n    for (let i = 1; i < 256 * 256; i++)\n      starts0[i] = starts0[i - 1] + counts0[i - 1];\n    depthIndex = new Uint32Array(vertexCount);\n    for (let i = 0; i < vertexCount; i++)\n      depthIndex[starts0[sizeList[i]]++] = i;\n\n    console.timeEnd(\"sort\");\n\n    lastProj = viewProj;\n    self.postMessage({ depthIndex, viewProj, vertexCount }, [\n      depthIndex.buffer,\n    ]);\n  }\n\n  function processPlyBuffer(inputBuffer) {\n    const ubuf = new Uint8Array(inputBuffer);\n    // 10KB ought to be enough for a header...\n    const header = new TextDecoder().decode(ubuf.slice(0, 1024 * 10));\n    const header_end = \"end_header\\n\";\n    const header_end_index = header.indexOf(header_end);\n    if (header_end_index < 0)\n      throw new Error(\"Unable to read .ply file header\");\n    const vertexCount = parseInt(/element vertex (\\d+)\\n/.exec(header)[1]);\n    console.log(\"Vertex Count\", vertexCount);\n    let row_offset = 0,\n      offsets = {},\n      types = {};\n    const TYPE_MAP = {\n      double: \"getFloat64\",\n      int: \"getInt32\",\n      uint: \"getUint32\",\n      float: \"getFloat32\",\n      short: \"getInt16\",\n      ushort: \"getUint16\",\n      uchar: \"getUint8\",\n    };\n    for (let prop of header\n      .slice(0, header_end_index)\n      .split(\"\\n\")\n      .filter((k) => k.startsWith(\"property \"))) {\n      const [p, type, name] = prop.split(\" \");\n      const arrayType = TYPE_MAP[type] || \"getInt8\";\n      types[name] = arrayType;\n      offsets[name] = row_offset;\n      row_offset += parseInt(arrayType.replace(/[^\\d]/g, \"\")) / 8;\n    }\n    console.log(\"Bytes per row\", row_offset, types, offsets);\n\n    let dataView = new DataView(\n      inputBuffer,\n      header_end_index + header_end.length\n    );\n    let row = 0;\n    const attrs = new Proxy(\n      {},\n      {\n        get(target, prop) {\n          if (!types[prop]) throw new Error(prop + \" not found\");\n          return dataView[types[prop]](row * row_offset + offsets[prop], true);\n        },\n      }\n    );\n\n    console.time(\"calculate importance\");\n    let sizeList = new Float32Array(vertexCount);\n    let sizeIndex = new Uint32Array(vertexCount);\n    for (row = 0; row < vertexCount; row++) {\n      sizeIndex[row] = row;\n      if (!types[\"scale_0\"]) continue;\n      const size =\n        Math.exp(attrs.scale_0) *\n        Math.exp(attrs.scale_1) *\n        Math.exp(attrs.scale_2);\n      const opacity = 1 / (1 + Math.exp(-attrs.opacity));\n      sizeList[row] = size * opacity;\n    }\n    console.timeEnd(\"calculate importance\");\n\n    console.time(\"sort\");\n    sizeIndex.sort((b, a) => sizeList[a] - sizeList[b]);\n    console.timeEnd(\"sort\");\n\n    // 6*4 + 4 + 4 = 8*4\n    // XYZ - Position (Float32)\n    // XYZ - Scale (Float32)\n    // RGBA - colors (uint8)\n    // IJKL - quaternion/rot (uint8)\n    const rowLength = 3 * 4 + 3 * 4 + 4 + 4;\n    const buffer = new ArrayBuffer(rowLength * vertexCount);\n\n    console.time(\"build buffer\");\n    for (let j = 0; j < vertexCount; j++) {\n      row = sizeIndex[j];\n\n      const position = new Float32Array(buffer, j * rowLength, 3);\n      const scales = new Float32Array(buffer, j * rowLength + 4 * 3, 3);\n      const rgba = new Uint8ClampedArray(\n        buffer,\n        j * rowLength + 4 * 3 + 4 * 3,\n        4\n      );\n      const rot = new Uint8ClampedArray(\n        buffer,\n        j * rowLength + 4 * 3 + 4 * 3 + 4,\n        4\n      );\n\n      if (types[\"scale_0\"]) {\n        const qlen = Math.sqrt(\n          attrs.rot_0 ** 2 +\n            attrs.rot_1 ** 2 +\n            attrs.rot_2 ** 2 +\n            attrs.rot_3 ** 2\n        );\n\n        rot[0] = (attrs.rot_0 / qlen) * 128 + 128;\n        rot[1] = (attrs.rot_1 / qlen) * 128 + 128;\n        rot[2] = (attrs.rot_2 / qlen) * 128 + 128;\n        rot[3] = (attrs.rot_3 / qlen) * 128 + 128;\n\n        scales[0] = Math.exp(attrs.scale_0);\n        scales[1] = Math.exp(attrs.scale_1);\n        scales[2] = Math.exp(attrs.scale_2);\n      } else {\n        scales[0] = 0.01;\n        scales[1] = 0.01;\n        scales[2] = 0.01;\n\n        rot[0] = 255;\n        rot[1] = 0;\n        rot[2] = 0;\n        rot[3] = 0;\n      }\n\n      position[0] = attrs.x;\n      position[1] = attrs.y;\n      position[2] = attrs.z;\n\n      if (types[\"f_dc_0\"]) {\n        const SH_C0 = 0.28209479177387814;\n        rgba[0] = (0.5 + SH_C0 * attrs.f_dc_0) * 255;\n        rgba[1] = (0.5 + SH_C0 * attrs.f_dc_1) * 255;\n        rgba[2] = (0.5 + SH_C0 * attrs.f_dc_2) * 255;\n      } else {\n        rgba[0] = attrs.red;\n        rgba[1] = attrs.green;\n        rgba[2] = attrs.blue;\n      }\n      if (types[\"opacity\"]) {\n        rgba[3] = (1 / (1 + Math.exp(-attrs.opacity))) * 255;\n      } else {\n        rgba[3] = 255;\n      }\n    }\n    console.timeEnd(\"build buffer\");\n    return buffer;\n  }\n\n  const throttledSort = () => {\n    if (!sortRunning) {\n      sortRunning = true;\n      let lastView = viewProj;\n      runSort(lastView);\n      setTimeout(() => {\n        sortRunning = false;\n        if (lastView !== viewProj) {\n          throttledSort();\n        }\n      }, 0);\n    }\n  };\n\n  let sortRunning;\n  self.onmessage = (e) => {\n    if (e.data.ply) {\n      vertexCount = 0;\n      runSort(viewProj);\n      buffer = processPlyBuffer(e.data.ply);\n      vertexCount = Math.floor(buffer.byteLength / rowLength);\n      postMessage({ buffer: buffer });\n    } else if (e.data.buffer) {\n      buffer = e.data.buffer;\n      vertexCount = e.data.vertexCount;\n    } else if (e.data.vertexCount) {\n      vertexCount = e.data.vertexCount;\n    } else if (e.data.view) {\n      viewProj = e.data.view;\n      throttledSort();\n    }\n  };\n}\n\nconst vertexShaderSource = `\n#version 300 es\nprecision highp float;\nprecision highp int;\n\nuniform highp usampler2D u_texture;\nuniform mat4 projection, view;\nuniform vec2 focal;\nuniform vec2 viewport;\n\nin vec2 position;\nin int index;\n\nout vec4 vColor;\nout vec2 vPosition;\n\nvoid main () {\n    uvec4 cen = texelFetch(u_texture, ivec2((uint(index) & 0x3ffu) << 1, uint(index) >> 10), 0);\n    vec4 cam = view * vec4(uintBitsToFloat(cen.xyz), 1);\n    vec4 pos2d = projection * cam;\n\n    float clip = 1.2 * pos2d.w;\n    if (pos2d.z < -clip || pos2d.x < -clip || pos2d.x > clip || pos2d.y < -clip || pos2d.y > clip) {\n        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);\n        return;\n    }\n\n    uvec4 cov = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 1) | 1u, uint(index) >> 10), 0);\n    vec2 u1 = unpackHalf2x16(cov.x), u2 = unpackHalf2x16(cov.y), u3 = unpackHalf2x16(cov.z);\n    mat3 Vrk = mat3(u1.x, u1.y, u2.x, u1.y, u2.y, u3.x, u2.x, u3.x, u3.y);\n\n    mat3 J = mat3(\n        focal.x / cam.z, 0., -(focal.x * cam.x) / (cam.z * cam.z), \n        0., -focal.y / cam.z, (focal.y * cam.y) / (cam.z * cam.z), \n        0., 0., 0.\n    );\n\n    mat3 T = transpose(mat3(view)) * J;\n    mat3 cov2d = transpose(T) * Vrk * T;\n\n    float mid = (cov2d[0][0] + cov2d[1][1]) / 2.0;\n    float radius = length(vec2((cov2d[0][0] - cov2d[1][1]) / 2.0, cov2d[0][1]));\n    float lambda1 = mid + radius, lambda2 = mid - radius;\n\n    if(lambda2 < 0.0) return;\n    vec2 diagonalVector = normalize(vec2(cov2d[0][1], lambda1 - cov2d[0][0]));\n    vec2 majorAxis = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;\n    vec2 minorAxis = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);\n\n    vColor = clamp(pos2d.z/pos2d.w+1.0, 0.0, 1.0) * vec4((cov.w) & 0xffu, (cov.w >> 8) & 0xffu, (cov.w >> 16) & 0xffu, (cov.w >> 24) & 0xffu) / 255.0;\n    vPosition = position;\n\n    vec2 vCenter = vec2(pos2d) / pos2d.w;\n    gl_Position = vec4(\n        vCenter \n        + position.x * majorAxis / viewport \n        + position.y * minorAxis / viewport, 0.0, 1.0);\n\n}\n`.trim();\n\nconst fragmentShaderSource = `\n#version 300 es\nprecision highp float;\n\nin vec4 vColor;\nin vec2 vPosition;\n\nout vec4 fragColor;\n\nvoid main () {\n    float A = -dot(vPosition, vPosition);\n    if (A < -4.0) discard;\n    float B = exp(A) * vColor.a;\n    fragColor = vec4(B * vColor.rgb, B);\n}\n\n`.trim();\n\nlet defaultViewMatrix = [\n  0,\n  1,\n  0,\n  0, // First row (X-axis direction, rotated 90 degrees)\n  -1,\n  0,\n  0,\n  0, // Second row (Y-axis direction, rotated 90 degrees)\n  0,\n  0,\n  1,\n  0, // Third row (Z-axis direction, unchanged)\n  0,\n  0,\n  0,\n  1, // Fourth row (Translation, unchanged)\n];\n\nlet viewMatrix = defaultViewMatrix;\n\n// This function is called when the user selects a room from the dropdown menu.\n// It fetches the model data for the selected room using the fetchUrl()\nasync function handleRendering(req, carousel) {\n  const rowLength = 3 * 4 + 3 * 4 + 4 + 4;\n  const reader = req.body.getReader();\n  let splatData = new Uint8Array(req.headers.get(\"content-length\"));\n\n  const downsample =\n    splatData.length / rowLength > 500000 ? 1 : 1 / devicePixelRatio;\n  console.log(splatData.length / rowLength, downsample);\n\n  const worker = new Worker(\n    URL.createObjectURL(\n      new Blob([\"(\", createWorker.toString(), \")(self)\"], {\n        type: \"application/javascript\",\n      })\n    )\n  );\n\n  const canvas = document.getElementById(\"canvas\");\n  const fps = document.getElementById(\"fps\");\n  let projectionMatrix;\n\n  const gl = canvas.getContext(\"webgl2\", {\n    antialias: false,\n  });\n\n  const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexShaderSource);\n  gl.compileShader(vertexShader);\n  if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS))\n    console.error(gl.getShaderInfoLog(vertexShader));\n\n  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentShaderSource);\n  gl.compileShader(fragmentShader);\n  if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS))\n    console.error(gl.getShaderInfoLog(fragmentShader));\n\n  const program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  gl.useProgram(program);\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n    console.error(gl.getProgramInfoLog(program));\n\n  gl.disable(gl.DEPTH_TEST);\n\n  gl.enable(gl.BLEND);\n  gl.blendFuncSeparate(\n    gl.ONE_MINUS_DST_ALPHA,\n    gl.ONE,\n    gl.ONE_MINUS_DST_ALPHA,\n    gl.ONE\n  );\n  gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n\n  const u_projection = gl.getUniformLocation(program, \"projection\");\n  const u_viewport = gl.getUniformLocation(program, \"viewport\");\n  const u_focal = gl.getUniformLocation(program, \"focal\");\n  const u_view = gl.getUniformLocation(program, \"view\");\n\n  const triangleVertices = new Float32Array([-2, -2, 2, -2, 2, 2, -2, 2]);\n  const vertexBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, triangleVertices, gl.STATIC_DRAW);\n  const a_position = gl.getAttribLocation(program, \"position\");\n  gl.enableVertexAttribArray(a_position);\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n  gl.vertexAttribPointer(a_position, 2, gl.FLOAT, false, 0, 0);\n\n  var texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  var u_textureLocation = gl.getUniformLocation(program, \"u_texture\");\n  gl.uniform1i(u_textureLocation, 0);\n\n  const indexBuffer = gl.createBuffer();\n  const a_index = gl.getAttribLocation(program, \"index\");\n  gl.enableVertexAttribArray(a_index);\n  gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n  gl.vertexAttribIPointer(a_index, 1, gl.INT, false, 0, 0);\n  gl.vertexAttribDivisor(a_index, 1);\n\n  const resize = () => {\n    gl.uniform2fv(u_focal, new Float32Array([camera.fx, camera.fy]));\n\n    projectionMatrix = getProjectionMatrix(\n      camera.fx / downsample,\n      camera.fy / downsample,\n      innerWidth,\n      innerHeight\n    );\n\n    gl.uniform2fv(u_viewport, new Float32Array([innerWidth, innerHeight]));\n\n    gl.canvas.width = Math.round(innerWidth / downsample);\n    gl.canvas.height = Math.round(innerHeight / downsample);\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n    gl.uniformMatrix4fv(u_projection, false, projectionMatrix);\n  };\n\n  window.addEventListener(\"resize\", resize);\n  resize();\n\n  worker.onmessage = (e) => {\n    if (e.data.buffer) {\n      splatData = new Uint8Array(e.data.buffer);\n      const blob = new Blob([splatData.buffer], {\n        type: \"application/octet-stream\",\n      });\n      const link = document.createElement(\"a\");\n      link.download = \"model.splat\";\n      link.href = URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.click();\n    } else if (e.data.texdata) {\n      const { texdata, texwidth, texheight } = e.data;\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA32UI,\n        texwidth,\n        texheight,\n        0,\n        gl.RGBA_INTEGER,\n        gl.UNSIGNED_INT,\n        texdata\n      );\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n    } else if (e.data.depthIndex) {\n      const { depthIndex, viewProj } = e.data;\n      gl.bindBuffer(gl.ARRAY_BUFFER, indexBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, depthIndex, gl.DYNAMIC_DRAW);\n      vertexCount = e.data.vertexCount;\n    }\n  };\n\n  let activeKeys = [];\n  // window.addEventListener(\"keydown\", (e) => {\n  //   carousel = false;\n  //   if (!activeKeys.includes(e.code)) activeKeys.push(e.code);\n  //   if (/\\d/.test(e.key)) {\n  //     camera = cameras[parseInt(e.key)];\n  //     viewMatrix = getViewMatrix(camera);\n  //   }\n  //   if (e.code == \"KeyV\") {\n  //     location.hash =\n  //       \"#\" + JSON.stringify(viewMatrix.map((k) => Math.round(k * 100) / 100));\n  //   } else if (e.code === \"KeyP\") {\n  //     carousel = true;\n  //   }\n  // });\n\n  window.addEventListener(\"keydown\", (e) => {\n    carousel = false;\n    if (!activeKeys.includes(e.code)) activeKeys.push(e.code);\n    if (/\\d/.test(e.key)) {\n      const cameraIndex = parseInt(e.key);\n      if (cameraIndex >= 0 && cameraIndex < cameras.length) {\n        camera = cameras[cameraIndex];\n        if (camera && camera.rotation && camera.position) {\n          viewMatrix = getViewMatrix(camera);\n        } else {\n          console.warn(\"Invalid camera object at index\", cameraIndex);\n        }\n      } else {\n        console.warn(\"Invalid camera index:\", cameraIndex);\n      }\n    }\n    if (e.code == \"KeyV\") {\n      location.hash =\n        \"#\" + JSON.stringify(viewMatrix.map((k) => Math.round(k * 100) / 100));\n    } else if (e.code === \"KeyP\") {\n      carousel = true;\n    }\n  });\n\n\n  window.addEventListener(\"keyup\", (e) => {\n    activeKeys = activeKeys.filter((k) => k !== e.code);\n  });\n  window.addEventListener(\"blur\", () => {\n    activeKeys = [];\n  });\n\n  window.addEventListener(\n    \"wheel\",\n    (e) => {\n      carousel = false;\n      e.preventDefault();\n      const lineHeight = 10;\n      const scale =\n        e.deltaMode == 1 ? lineHeight : e.deltaMode == 2 ? innerHeight : 1;\n      let inv = invert4(viewMatrix);\n      if (e.shiftKey) {\n        inv = translate4(\n          inv,\n          (e.deltaX * scale) / innerWidth,\n          (e.deltaY * scale) / innerHeight,\n          0\n        );\n      } else if (e.ctrlKey || e.metaKey) {\n        let preY = inv[13];\n        inv = translate4(inv, 0, 0, (-10 * (e.deltaY * scale)) / innerHeight);\n        inv[13] = preY;\n      } else {\n        let d = 4;\n        inv = translate4(inv, 0, 0, d);\n        inv = rotate4(inv, -(e.deltaX * scale) / innerWidth, 0, 1, 0);\n        inv = rotate4(inv, (e.deltaY * scale) / innerHeight, 1, 0, 0);\n        inv = translate4(inv, 0, 0, -d);\n      }\n\n      viewMatrix = invert4(inv);\n    },\n    { passive: false }\n  );\n\n  // joystick functionality\n\n  let joystickCenterX, joystickCenterY;\n  let joystickRadius = 75; // Half of joystick-container size (150px)\n  let moveX = 0,\n    moveY = 0;\n  let down = false;\n\n  // Define range constraints\n  const minX = 0,\n    maxX = -2; // Example range for X-axis\n  const minY = -4,\n    maxY = 4; // Range for Y-axis\n  const minZ = -9,\n    maxZ = 9; // Example range for Z-axis\n\n  joystick.addEventListener(\"mousedown\", (e) => {\n    e.preventDefault();\n    const rect = joystick.getBoundingClientRect();\n    joystickCenterX = rect.left + rect.width / 2;\n    joystickCenterY = rect.top + rect.height / 2;\n    down = true;\n    updateMovement(e.clientX, e.clientY);\n  });\n\n  joystick.addEventListener(\"mousemove\", (e) => {\n    if (!down) return;\n    e.preventDefault();\n    updateMovement(e.clientX, e.clientY);\n  });\n\n  joystick.addEventListener(\"mouseup\", (e) => {\n    e.preventDefault();\n    stopMovement();\n  });\n\n  joystick.addEventListener(\"mouseleave\", (e) => {\n    if (down) {\n      stopMovement();\n    }\n  });\n\n  joystick.addEventListener(\"touchstart\", (e) => {\n    e.preventDefault();\n    const rect = joystick.getBoundingClientRect();\n    joystickCenterX = rect.left + rect.width / 2;\n    joystickCenterY = rect.top + rect.height / 2;\n    down = true;\n    updateMovement(e.touches[0].clientX, e.touches[0].clientY);\n  });\n\n  joystick.addEventListener(\"touchmove\", (e) => {\n    if (!down) return;\n    e.preventDefault();\n    updateMovement(e.touches[0].clientX, e.touches[0].clientY);\n  });\n\n  joystick.addEventListener(\"touchend\", (e) => {\n    e.preventDefault();\n    stopMovement();\n  });\n\n  // function updateMovement(clientX, clientY) {\n  //   let dx = clientX - joystickCenterX;\n  //   let dy = clientY - joystickCenterY;\n  //   let distance = Math.hypot(dx, dy);\n\n  //   if (distance > joystickRadius) {\n  //     let angle = Math.atan2(dy, dx);\n  //     dx = joystickRadius * Math.cos(angle);\n  //     dy = joystickRadius * Math.sin(angle);\n  //   }\n\n  //   joystick.style.transform = `translate(${dx}px, ${dy}px)`;\n\n  //   moveX = (dx / joystickRadius) * 0.1; // Adjust the sensitivity\n  //   moveY = (dy / joystickRadius) * 0.1;\n  // }\n\n  function updateMovement(clientX, clientY) {\n    let dx = clientX - joystickCenterX;\n    let dy = clientY - joystickCenterY;\n    let distance = Math.hypot(dx, dy);\n  \n    if (distance > joystickRadius) {\n      let angle = Math.atan2(dy, dx);\n      dx = joystickRadius * Math.cos(angle);\n      dy = joystickRadius * Math.sin(angle);\n    }\n  \n    joystick.style.transform = `translate(${dx}px, ${dy}px)`;\n  \n    // Get the camera's forward and right vectors\n    let cameraForward = [viewMatrix[2], viewMatrix[6], viewMatrix[10]];\n    let cameraRight = [viewMatrix[0], viewMatrix[4], viewMatrix[8]];\n  \n    // Calculate movement based on camera orientation\n    moveX = (dx / joystickRadius) * 0.1 * cameraRight[0];\n    moveY = (dy / joystickRadius) * 0.1 * cameraForward[2];\n  }\n\n  function stopMovement() {\n    down = false;\n    moveX = 0;\n    moveY = 0;\n    joystick.style.transform = `translate(0px, 0px)`;\n  }\n\n  function animate() {\n    if (down) {\n      let inv = invert4(viewMatrix);\n\n      // Apply movement on X and Z axes\n      inv = translate4(inv, moveX, 0, -moveY);\n\n      // Ensure the X, Y, and Z values are constrained within their respective ranges\n      let newX = inv[12] + 0; // inv[12] is the X component of the translation\n      newX = Math.max(minX, Math.min(maxX, newX));\n      inv[12] = newX;\n\n      let newY = inv[13] + 0; // inv[13] is the Y component of the translation\n      newY = Math.max(minY, Math.min(maxY, newY));\n      inv[13] = newY;\n\n      let newZ = inv[14] + 0; // inv[14] is the Z component of the translation\n      newZ = Math.max(minZ, Math.min(maxZ, newZ));\n      inv[14] = newZ;\n\n      viewMatrix = invert4(inv);\n    }\n    requestAnimationFrame(animate);\n  }\n  // Start the animation loop\n  animate();\n\n  // swipe functionality\n  let startX,\n    startY,\n    isSwiping = false;\n  const swipeThreshold = 3; // Minimum distance for a swipe to be considered\n  const maxRotationAngle = Math.PI / 2; // 45 degrees in radians to avoid tilting too much\n  const swipeSpeedFactor = 0.005; // Increased swipe speed factor\n  let lastSwipeDirection = \"\"; // Track the last swipe direction\n\n  function handleSwipeStart(e) {\n    e.preventDefault();\n    if (e.touches.length === 1) {\n      startX = e.touches[0].clientX;\n      startY = e.touches[0].clientY;\n      isSwiping = true;\n      lastSwipeDirection = \"\"; // Reset the last swipe direction on new touch start\n    }\n  }\n\n  // function handleSwipeMove(e) {\n  //   e.preventDefault();\n  //   if (isSwiping) {\n  //     const currentX = e.touches[0].clientX;\n  //     const currentY = e.touches[0].clientY;\n  //     const dx = currentX - startX;\n  //     const dy = currentY - startY;\n\n  //     let inv = invert4(viewMatrix);\n  //     let currentRotationX = Math.asin(inv[6]); // Rotation around X-axis\n\n  //     if (Math.abs(dx) > Math.abs(dy)) {\n  //       // Horizontal swipe\n  //       if (Math.abs(dx) > swipeThreshold) {\n  //         if (\n  //           lastSwipeDirection === \"\" ||\n  //           lastSwipeDirection === \"horizontal\"\n  //         ) {\n  //           inv = rotate4(inv, -swipeSpeedFactor * dx, 0, 1, 0);\n  //           lastSwipeDirection = \"horizontal\";\n  //         }\n  //       }\n  //     } else {\n  //       // Vertical swipe\n  //       if (Math.abs(dy) > swipeThreshold) {\n  //         if (lastSwipeDirection === \"\" || lastSwipeDirection === \"vertical\") {\n  //           if (dy > 0 && currentRotationX < maxRotationAngle) {\n  //             // Swipe down\n  //             inv = rotate4(inv, swipeSpeedFactor * dy, 1, 0, 0);\n  //             if (\n  //               currentRotationX + swipeSpeedFactor * dy >=\n  //               maxRotationAngle\n  //             ) {\n  //               inv = topViewMatrix;\n  //             }\n  //           } else if (dy < 0 && currentRotationX > -maxRotationAngle) {\n  //             // Swipe up\n  //             inv = rotate4(inv, swipeSpeedFactor * dy, 1, 0, 0);\n  //             if (\n  //               currentRotationX + swipeSpeedFactor * dy <=\n  //               -maxRotationAngle\n  //             ) {\n  //               inv = bottomViewMatrix;\n  //             }\n  //           }\n  //           lastSwipeDirection = \"vertical\";\n  //         }\n  //       }\n  //     }\n\n  //     viewMatrix = invert4(inv);\n  //     updateViewMatrix();\n\n  //     // Update start positions for the next move\n  //     startX = currentX;\n  //     startY = currentY;\n  //   }\n  // }\n\n  function handleSwipeMove(e) {\n    e.preventDefault();\n    if (isSwiping) {\n      const currentX = e.touches[0].clientX;\n      const currentY = e.touches[0].clientY;\n      const dx = currentX - startX;\n      const dy = currentY - startY;\n  \n      let inv = invert4(viewMatrix);\n      let currentRotationX = Math.asin(inv[6]); // Rotation around X-axis\n  \n      if (Math.abs(dx) > Math.abs(dy)) {\n        // Horizontal swipe\n        if (Math.abs(dx) > swipeThreshold) {\n          if (\n            lastSwipeDirection === \"\" ||\n            lastSwipeDirection === \"horizontal\"\n          ) {\n            inv = rotate4(inv, -swipeSpeedFactor * dx, 0, 1, 0);\n            lastSwipeDirection = \"horizontal\";\n          }\n        }\n      } else {\n        // Vertical swipe\n        if (Math.abs(dy) > swipeThreshold) {\n          if (lastSwipeDirection === \"\" || lastSwipeDirection === \"vertical\") {\n            // Limit vertical rotation to a natural range\n            const maxRotationAngle = Math.PI / 4; // Adjust this value as needed\n            const newRotationX = currentRotationX + swipeSpeedFactor * dy;\n            if (newRotationX >= -maxRotationAngle && newRotationX <= 0) {\n              inv = rotate4(inv, swipeSpeedFactor * dy, 1, 0, 0);\n            }\n            lastSwipeDirection = \"vertical\";\n          }\n        }\n      }\n  \n      viewMatrix = invert4(inv);\n      updateViewMatrix();\n  \n      // Update start positions for the next move\n      startX = currentX;\n      startY = currentY;\n    }\n  }\n\n  function handleSwipeEnd(e) {\n    e.preventDefault();\n    isSwiping = false;\n    lastSwipeDirection = \"\"; // Reset the last swipe direction on touch end\n  }\n\n  // Attach event listeners for swipe\n  canvas.addEventListener(\"touchstart\", handleSwipeStart, { passive: false });\n  canvas.addEventListener(\"touchmove\", handleSwipeMove, { passive: false });\n  canvas.addEventListener(\"touchend\", handleSwipeEnd, { passive: false });\n\n  function updateViewMatrix() {\n    const viewProj = multiply4(projectionMatrix, viewMatrix);\n    worker.postMessage({ view: viewProj });\n  }\n\n  // mouse drag events\n  let mouseStartX,\n    mouseStartY,\n    isMouseSwiping = false;\n  const mouseSwipeThreshold = 3; // Minimum distance for a swipe to be considered\n  const mouseSwipeSpeedFactor = 0.005; // Increased swipe speed factor\n  let mouseLastSwipeDirection = \"\"; // Track the last swipe direction\n  const mouseMaxRotationAngle = Math.PI / 2; // 45 degrees in radians to avoid tilting too much\n\n  function handleMouseDown(e) {\n    e.preventDefault();\n    if (e.button === 0) {\n      // Left mouse button\n      mouseStartX = e.clientX;\n      mouseStartY = e.clientY;\n      isMouseSwiping = true;\n      mouseLastSwipeDirection = \"\"; // Reset the last swipe direction on mouse down\n    }\n  }\n\n  // function handleMouseMove(e) {\n  //   e.preventDefault();\n  //   if (isMouseSwiping) {\n  //     const currentX = e.clientX;\n  //     const currentY = e.clientY;\n  //     const dx = currentX - mouseStartX;\n  //     const dy = currentY - mouseStartY;\n\n  //     let inv = invert4(viewMatrix);\n  //     let currentRotationX = Math.asin(inv[6]); // Rotation around X-axis\n\n  //     if (Math.abs(dx) > Math.abs(dy)) {\n  //       // Horizontal swipe\n  //       if (Math.abs(dx) > mouseSwipeThreshold) {\n  //         if (\n  //           mouseLastSwipeDirection === \"\" ||\n  //           mouseLastSwipeDirection === \"horizontal\"\n  //         ) {\n  //           inv = rotate4(inv, -mouseSwipeSpeedFactor * dx, 0, 1, 0);\n  //           mouseLastSwipeDirection = \"horizontal\";\n  //         }\n  //       }\n  //     } else {\n  //       // Vertical swipe\n  //       if (Math.abs(dy) > mouseSwipeThreshold) {\n  //         if (\n  //           mouseLastSwipeDirection === \"\" ||\n  //           mouseLastSwipeDirection === \"vertical\"\n  //         ) {\n  //           if (dy > 0 && currentRotationX < mouseMaxRotationAngle) {\n  //             // Swipe down\n  //             inv = rotate4(inv, mouseSwipeSpeedFactor * dy, 1, 0, 0);\n  //             if (\n  //               currentRotationX + mouseSwipeSpeedFactor * dy >=\n  //               mouseMaxRotationAngle\n  //             ) {\n  //               inv = topViewMatrix;\n  //             }\n  //           } else if (dy < 0 && currentRotationX > -mouseMaxRotationAngle) {\n  //             // Swipe up\n  //             inv = rotate4(inv, mouseSwipeSpeedFactor * dy, 1, 0, 0);\n  //             if (\n  //               currentRotationX + mouseSwipeSpeedFactor * dy <=\n  //               -mouseMaxRotationAngle\n  //             ) {\n  //               inv = bottomViewMatrix;\n  //             }\n  //           }\n  //           mouseLastSwipeDirection = \"vertical\";\n  //         }\n  //       }\n  //     }\n\n  //     viewMatrix = invert4(inv);\n  //     updateViewMatrix();\n\n  //     // Update start positions for the next move\n  //     mouseStartX = currentX;\n  //     mouseStartY = currentY;\n  //   }\n  // }\n\n\n  // #This code works well\n  function handleMouseMove(e) {\n    e.preventDefault();\n    if (isMouseSwiping) {\n      const currentX = e.clientX;\n      const currentY = e.clientY;\n      const dx = currentX - mouseStartX;\n      const dy = currentY - mouseStartY;\n  \n      let inv = invert4(viewMatrix);\n      let currentRotationX = Math.asin(inv[6]); // Rotation around X-axis\n  \n      if (Math.abs(dx) > Math.abs(dy)) {\n        // Horizontal swipe\n        if (Math.abs(dx) > mouseSwipeThreshold) {\n          if (\n            mouseLastSwipeDirection === \"\" ||\n            mouseLastSwipeDirection === \"horizontal\"\n          ) {\n            inv = rotate4(inv, -mouseSwipeSpeedFactor * dx, 0, 1, 0);\n            mouseLastSwipeDirection = \"horizontal\";\n          }\n        }\n      } else {\n        // Vertical swipe\n        if (Math.abs(dy) > mouseSwipeThreshold) {\n          if (\n            mouseLastSwipeDirection === \"\" ||\n            mouseLastSwipeDirection === \"vertical\"\n          ) {\n            // Limit vertical rotation to a natural range\n            const maxRotationAngle = Math.PI / 4; // Adjust this value as needed\n            const newRotationX = currentRotationX + mouseSwipeSpeedFactor * dy;\n            if (newRotationX >= -maxRotationAngle && newRotationX <= 0) {\n              inv = rotate4(inv, mouseSwipeSpeedFactor * dy, 1, 0, 0);\n            }\n            mouseLastSwipeDirection = \"vertical\";\n          }\n        }\n      }\n  \n      viewMatrix = invert4(inv);\n      updateViewMatrix();\n  \n      // Update start positions for the next move\n      mouseStartX = currentX;\n      mouseStartY = currentY;\n    }\n  }\n\n  function handleMouseUp(e) {\n    e.preventDefault();\n    isMouseSwiping = false;\n    mouseLastSwipeDirection = \"\"; // Reset the last swipe direction on mouse up\n  }\n\n  // Attach event listeners for mouse\n  canvas.addEventListener(\"mousedown\", handleMouseDown, { passive: false });\n  canvas.addEventListener(\"mousemove\", handleMouseMove, { passive: false });\n  canvas.addEventListener(\"mouseup\", handleMouseUp, { passive: false });\n\n  // Rotation functions\n  function rotateW() {\n    let inv = invert4(viewMatrix);\n    inv = rotate4(inv, -0.025, 1, 0, 0);\n    viewMatrix = invert4(inv);\n    updateViewMatrix();\n  }\n\n  function rotateA() {\n    let inv = invert4(viewMatrix);\n    inv = rotate4(inv, 0.25, 0, 1, 0);\n    viewMatrix = invert4(inv);\n    updateViewMatrix();\n  }\n\n  function rotateS() {\n    let inv = invert4(viewMatrix);\n    inv = rotate4(inv, 0.025, 1, 0, 0);\n    viewMatrix = invert4(inv);\n    updateViewMatrix();\n  }\n\n  function rotateD() {\n    let inv = invert4(viewMatrix);\n    inv = rotate4(inv, -0.25, 0, 1, 0);\n    viewMatrix = invert4(inv);\n    updateViewMatrix();\n  }\n\n  // Initialize the canvas with swipe gesture listeners\n  function initializeCanvas() {\n    canvas = document.getElementById(\"canvas\");\n    canvas.addEventListener(\"touchstart\", handleSwipeStart, { passive: false });\n    canvas.addEventListener(\"touchmove\", handleSwipeMove, { passive: false });\n    canvas.addEventListener(\"touchend\", handleSwipeEnd, { passive: false });\n  }\n\n  document.addEventListener(\"DOMContentLoaded\", initializeCanvas);\n\n  (altX = 0), (altY = 0);\n\n  let jumpDelta = 0;\n  let vertexCount = 0;\n\n  let lastFrame = 0;\n  let avgFps = 0;\n  let start = 0;\n\n  window.addEventListener(\"gamepadconnected\", (e) => {\n    const gp = navigator.getGamepads()[e.gamepad.index];\n    console.log(\n      `Gamepad connected at index ${gp.index}: ${gp.id}. It has ${gp.buttons.length} buttons and ${gp.axes.length} axes.`\n    );\n  });\n  window.addEventListener(\"gamepaddisconnected\", (e) => {\n    console.log(\"Gamepad disconnected\");\n  });\n\n  let leftGamepadTrigger, rightGamepadTrigger;\n\n  const frame = (now) => {\n    let inv = invert4(viewMatrix);\n\n    if (activeKeys.includes(\"ArrowUp\")) inv = translate4(inv, 0, 0, 0.1);\n    if (activeKeys.includes(\"ArrowDown\")) inv = translate4(inv, 0, 0, -0.1);\n    if (activeKeys.includes(\"ArrowLeft\")) inv = translate4(inv, -0.03, 0, 0);\n    if (activeKeys.includes(\"ArrowRight\")) inv = translate4(inv, 0.03, 0, 0);\n    if (activeKeys.includes(\"KeyA\")) inv = rotate4(inv, -0.01, 0, 1, 0);\n    if (activeKeys.includes(\"KeyD\")) inv = rotate4(inv, 0.01, 0, 1, 0);\n    if (activeKeys.includes(\"KeyQ\")) inv = rotate4(inv, 0.01, 0, 0, 1);\n    if (activeKeys.includes(\"KeyE\")) inv = rotate4(inv, -0.01, 0, 0, 1);\n    if (activeKeys.includes(\"KeyW\")) inv = rotate4(inv, 0.005, 1, 0, 0);\n    if (activeKeys.includes(\"KeyS\")) inv = rotate4(inv, -0.005, 1, 0, 0);\n\n    const gamepads = navigator.getGamepads ? navigator.getGamepads() : [];\n    let isJumping = activeKeys.includes(\"KeySpace\");\n    for (let gamepad of gamepads) {\n      if (!gamepad) continue;\n\n      const axisThreshold = 0.1;\n      const moveSpeed = 0.06;\n      const rotateSpeed = 0.02;\n\n      if (Math.abs(gamepad.axes[0]) > axisThreshold) {\n        inv = translate4(inv, moveSpeed * gamepad.axes[0], 0, 0);\n        carousel = false;\n      }\n      if (Math.abs(gamepad.axes[1]) > axisThreshold) {\n        inv = translate4(inv, 0, 0, -moveSpeed * gamepad.axes[1]);\n        carousel = false;\n      }\n      if (gamepad.buttons[12].pressed || gamepad.buttons[13].pressed) {\n        inv = translate4(\n          inv,\n          0,\n          -moveSpeed *\n            (gamepad.buttons[12].pressed - gamepad.buttons[13].pressed),\n          0\n        );\n        carousel = false;\n      }\n\n      if (gamepad.buttons[14].pressed || gamepad.buttons[15].pressed) {\n        inv = translate4(\n          inv,\n          -moveSpeed *\n            (gamepad.buttons[14].pressed - gamepad.buttons[15].pressed),\n          0,\n          0\n        );\n        carousel = false;\n      }\n\n      if (Math.abs(gamepad.axes[2]) > axisThreshold) {\n        inv = rotate4(inv, rotateSpeed * gamepad.axes[2], 0, 1, 0);\n        carousel = false;\n      }\n      if (Math.abs(gamepad.axes[3]) > axisThreshold) {\n        inv = rotate4(inv, -rotateSpeed * gamepad.axes[3], 1, 0, 0);\n        carousel = false;\n      }\n\n      let tiltAxis = gamepad.buttons[6].value - gamepad.buttons[7].value;\n      if (Math.abs(tiltAxis) > axisThreshold) {\n        inv = rotate4(inv, rotateSpeed * tiltAxis, 0, 0, 1);\n        carousel = false;\n      }\n      if (gamepad.buttons[4].pressed && !leftGamepadTrigger) {\n        camera = cameras[(cameras.indexOf(camera) + 1) % cameras.length];\n        inv = invert4(getViewMatrix(camera));\n        carousel = false;\n      }\n      if (gamepad.buttons[5].pressed && !rightGamepadTrigger) {\n        camera =\n          cameras[\n            (cameras.indexOf(camera) + cameras.length - 1) % cameras.length\n          ];\n        inv = invert4(getViewMatrix(camera));\n        carousel = false;\n      }\n      leftGamepadTrigger = gamepad.buttons[4].pressed;\n      rightGamepadTrigger = gamepad.buttons[5].pressed;\n      if (gamepad.buttons[0].pressed) {\n        isJumping = true;\n        carousel = false;\n      }\n      if (gamepad.buttons[3].pressed) {\n        carousel = true;\n      }\n    }\n\n    if ([\"KeyJ\", \"KeyK\", \"KeyL\", \"KeyI\"].some((k) => activeKeys.includes(k))) {\n      let d = 4;\n      inv = translate4(inv, 0, 0, d);\n      inv = rotate4(\n        inv,\n        activeKeys.includes(\"KeyJ\")\n          ? -0.05\n          : activeKeys.includes(\"KeyL\")\n          ? 0.05\n          : 0,\n        0,\n        1,\n        0\n      );\n      inv = rotate4(\n        inv,\n        activeKeys.includes(\"KeyI\")\n          ? 0.05\n          : activeKeys.includes(\"KeyK\")\n          ? -0.05\n          : 0,\n        1,\n        0,\n        0\n      );\n      inv = translate4(inv, 0, 0, -d);\n    }\n\n    viewMatrix = invert4(inv);\n\n    if (isJumping) {\n      jumpDelta = Math.min(1, jumpDelta + 0.05);\n    } else {\n      jumpDelta = Math.max(0, jumpDelta - 0.05);\n    }\n\n    let inv2 = invert4(viewMatrix);\n    inv2[13] -= jumpDelta;\n    inv2 = rotate4(inv2, -0.1 * jumpDelta, 1, 0, 0);\n    let actualViewMatrix = invert4(inv2);\n\n    const viewProj = multiply4(projectionMatrix, actualViewMatrix);\n    worker.postMessage({ view: viewProj });\n\n    const currentFps = 1000 / (now - lastFrame) || 0;\n    avgFps = avgFps * 0.9 + currentFps * 0.1;\n\n    if (vertexCount > 0) {\n      document.getElementById(\"spinner\").style.display = \"none\";\n      gl.uniformMatrix4fv(u_view, false, actualViewMatrix);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      gl.drawArraysInstanced(gl.TRIANGLE_FAN, 0, 4, vertexCount);\n    } else {\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      document.getElementById(\"spinner\").style.display = \"\";\n      start = Date.now() + 2000;\n    }\n    const progress = (100 * vertexCount) / (splatData.length / rowLength);\n    if (progress < 100) {\n      document.getElementById(\"progress\").style.width = progress + \"%\";\n    } else {\n      document.getElementById(\"progress\").style.display = \"none\";\n    }\n    fps.innerText = Math.round(avgFps) + \" fps\";\n    lastFrame = now;\n    requestAnimationFrame(frame);\n  };\n\n  frame();\n\n  const selectFile = (file) => {\n    const fr = new FileReader();\n    if (/\\.json$/i.test(file.name)) {\n      fr.onload = () => {\n        cameras = JSON.parse(fr.result);\n        viewMatrix = getViewMatrix(cameras[0]);\n        projectionMatrix = getProjectionMatrix(\n          camera.fx / downsample,\n          camera.fy / downsample,\n          canvas.width,\n          canvas.height\n        );\n        gl.uniformMatrix4fv(u_projection, false, projectionMatrix);\n\n        console.log(\"Loaded Cameras\");\n      };\n      fr.readAsText(file);\n    } else {\n      stopLoading = true;\n      fr.onload = () => {\n        splatData = new Uint8Array(fr.result);\n        console.log(\"Loaded\", Math.floor(splatData.length / rowLength));\n\n        if (\n          splatData[0] == 112 &&\n          splatData[1] == 108 &&\n          splatData[2] == 121 &&\n          splatData[3] == 10\n        ) {\n          worker.postMessage({ ply: splatData.buffer });\n        } else {\n          worker.postMessage({\n            buffer: splatData.buffer,\n            vertexCount: Math.floor(splatData.length / rowLength),\n          });\n        }\n      };\n      fr.readAsArrayBuffer(file);\n    }\n  };\n\n  window.addEventListener(\"hashchange\", (e) => {\n    try {\n      viewMatrix = JSON.parse(decodeURIComponent(location.hash.slice(1)));\n      carousel = false;\n    } catch (err) {}\n  });\n\n  const preventDefault = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  document.addEventListener(\"dragenter\", preventDefault);\n  document.addEventListener(\"dragover\", preventDefault);\n  document.addEventListener(\"dragleave\", preventDefault);\n  document.addEventListener(\"drop\", (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    selectFile(e.dataTransfer.files[0]);\n  });\n\n  let bytesRead = 0;\n  let lastVertexCount = -1;\n  let stopLoading = false;\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done || stopLoading) break;\n\n    splatData.set(value, bytesRead);\n    bytesRead += value.length;\n\n    if (vertexCount > lastVertexCount) {\n      worker.postMessage({\n        buffer: splatData.buffer,\n        vertexCount: Math.floor(bytesRead / rowLength),\n      });\n      lastVertexCount = vertexCount;\n    }\n  }\n  if (!stopLoading)\n    worker.postMessage({\n      buffer: splatData.buffer,\n      vertexCount: Math.floor(bytesRead / rowLength),\n    });\n}\n\nfunction populateDropdown() {\n  const dropdown = document.getElementById(\"dropdown\");\n  ROOM_TO_MODEL.forEach((_, room_name) => {\n    const optionElement = document.createElement(\"option\");\n    optionElement.textContent = room_name;\n    optionElement.value = room_name;\n    dropdown.appendChild(optionElement);\n  });\n}\n\nfunction getModelUrl(roomNameSelection) {\n  return (\n    ROOM_TO_MODEL.get(roomNameSelection) ||\n    \"https://link.storjshare.io/raw/jvxxeyhejguiei247jpxmx4vluua/neuron-dev-datastore/instaplan-master/no-super-entity/entity-classvaluation-1/4869-regal-dr--bonita-springs--fl-34134--usa/no-unit/26/primary/above-grade/level-1/clones/pool/model/iteration_30000.splat\"\n  );\n}\n\nasync function onDropdownChange(event) {\n  const selectedName = event.target.value;\n  renderRoom(selectedName);\n}\n\nasync function fetchUrl(url) {\n  return await fetch(url, {\n    mode: \"cors\",\n    credentials: \"omit\",\n  });\n}\n\n// calling fetchUrl func\nasync function renderRoom(roomName) {\n  const url = getModelUrl(roomName);\n  const data = await fetchUrl(url);\n\n  // Once the data is fetched, it calls handleRendering(data, true) to initiate the rendering process.\n  handleRendering(data, true);\n}\n\n// It fetches the model data for \"Room 1\" using the fetchUrl() function.\n// calling renderRoom function\nasync function startup() {\n  renderRoom(\"Room 0\"); //pass R1 Splat File\n}\n\n// JavaScript code to add functionality to control buttons\n// Function to toggle the visibility of control buttons\n\nfunction toggleControls() {\n  const controlButtons = document.querySelectorAll(\n    \".control-button:not(.toggle-control-button)\"\n  );\n  const toggleButton = document.querySelector(\".toggle-control-button\");\n  const isHidden = controlButtons[0].style.display === \"none\";\n  controlButtons.forEach((button) => {\n    button.style.display = isHidden ? \"block\" : \"none\";\n  });\n  toggleButton.textContent = isHidden ? \"-\" : \"+\";\n}\n\n// Initialize control buttons to stay open\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const controlButtons = document.querySelectorAll(\n    \".control-button:not(.toggle-control-button)\"\n  );\n  controlButtons.forEach((button) => {\n    button.style.display = \"block\"; // Set to \"block\" to keep buttons open\n  });\n  const toggleButton = document.querySelector(\".toggle-control-button\");\n  toggleButton.textContent = \"-\"; // Set to \"-\" to reflect open state\n});\n\nfunction resetView() {\n  // viewMatrix = [\n  //   0.10558458472489593, 0.9861639361953288, -0.12779900788429432, 0,\n  //   -0.7040692069504951, -0.01662032888317631, -0.709936839790606, 0,\n  //   -0.7022381699199949, 0.1649377325403449, 0.6925728099571271, 0,\n  //   1.24397577664366, 0.2920312770275307, 2.313979019457233, 1.000000000000136,\n  // ];\n\n  //replacing with new matrix data, to get proper view\n  // viewMatrix = [\n  //   0.07638517086111375, 0.996626454951439, -0.03001691128989404, 0,\n  //   -0.7140170209873993, 0.03366248912621875, -0.6993186187755619, 0,\n  //   -0.695948991961937, 0.07485015775998242, 0.7141795673851891, -0,\n  //   0.9032305821400154, -0.15233298296315945, 2.440263807340123,\n  //   1.0000000000000406,\n  // ];\n\n  viewMatrix = [\n    0,\n    1,\n    0,\n    0, // First row (X-axis direction, rotated 90 degrees)\n    -1,\n    0,\n    0,\n    0, // Second row (Y-axis direction, rotated 90 degrees)\n    0,\n    0,\n    1,\n    0, // Third row (Z-axis direction, unchanged)\n    0,\n    0,\n    0,\n    1, // Fourth row (Translation, unchanged)\n  ];\n\n  // View 1\n  // [\n  //   0.09692940421489006, 0.9952906530132473, 0.0010984639292021946, 0,\n  //   -0.7258669578680665, 0.07144578989005969, -0.6841145069228877, 0,\n  //   -0.6809712549542062, 0.06551347290018104, 0.7293737963449568, 0,\n  //   1.493013500324435, -0.24431679350484906, 3.825541510609132,\n  //   0.9999999999999745,\n  // ];\n\n  updateViewMatrix();\n}\n\nlet actionInterval;\n\nfunction startAction(action) {\n  if (actionInterval) clearInterval(actionInterval);\n  actionInterval = setInterval(window[action], 50); // Adjust the interval as needed\n}\n\nfunction stopAction() {\n  clearInterval(actionInterval);\n}\n\nfunction rotateW() {\n  let inv = invert4(viewMatrix);\n  inv = rotate4(inv, 0.005, 1, 0, 0);\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction rotateA() {\n  let inv = invert4(viewMatrix);\n  inv = rotate4(inv, -0.01, 0, 1, 0);\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction rotateS() {\n  let inv = invert4(viewMatrix);\n  inv = rotate4(inv, -0.005, 1, 0, 0);\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction rotateD() {\n  let inv = invert4(viewMatrix);\n  inv = rotate4(inv, 0.01, 0, 1, 0);\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction rotateQ() {\n  let inv = invert4(viewMatrix);\n  inv = rotate4(inv, 0.01, 0, 0, 1);\n  console.log(\"q\", viewMatrix);\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction rotateE() {\n  let inv = invert4(viewMatrix);\n  inv = rotate4(inv, -0.01, 0, 0, 1);\n  console.log(\"e\", viewMatrix);\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\n// functions to move the model up and down along the Y-axis\nfunction moveUp() {\n  // let inv = invert4(viewMatrix);\n  // inv = translate4(inv, 0, 0.1, 0); // Adjust the 0.1 value for the desired movement speed\n  // viewMatrix = invert4(inv);\n  // updateViewMatrix();\n  let inv = invert4(viewMatrix);\n  inv = translate4(inv, 0, -0.1, 0); // Adjust the -0.1 value for the desired movement speed\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction moveDown() {\n  // let inv = invert4(viewMatrix);\n  // inv = translate4(inv, 0, -0.1, 0); // Adjust the -0.1 value for the desired movement speed\n  // viewMatrix = invert4(inv);\n  // updateViewMatrix();\n\n  let inv = invert4(viewMatrix);\n  inv = translate4(inv, 0, 0.1, 0); // Adjust the 0.1 value for the desired movement speed\n  viewMatrix = invert4(inv);\n  updateViewMatrix();\n}\n\nfunction updateViewMatrix() {\n  const inv = invert4(viewMatrix);\n  const actualViewMatrix = invert4(inv);\n  const viewProj = multiply4(projectionMatrix, actualViewMatrix);\n  gl.uniformMatrix4fv(u_view, false, actualViewMatrix);\n  worker.postMessage({ view: viewProj });\n}\n\n// entry point initial state of the application.\n// It invokes the startup() function.\nasync function main() {\n  let carousel = true;\n  try {\n    viewMatrix = JSON.parse(decodeURIComponent(location.hash.slice(1)));\n    carousel = false;\n  } catch (err) {}\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    populateDropdown();\n    startup();\n    document\n      .getElementById(\"dropdown\")\n      .addEventListener(\"change\", onDropdownChange);\n\n    // keydown, keyup: Handle keyboard input.\n    document.getElementById(\"dropdown\").addEventListener(\"keydown\", (e) => {\n      e.preventDefault();\n    });\n  });\n}\n\nmain().catch((err) => {\n  document.getElementById(\"spinner\").style.display = \"none\";\n  document.getElementById(\"message\").innerText = err.toString();\n});\n"],"names":["ROOM_TO_MODEL","Map","cameras","id","img_name","width","height","position","rotation","fy","fx","camera","getProjectionMatrix","flat","getViewMatrix","R","t","multiply4","a","b","invert4","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","rotate4","rad","x","y","z","len","Math","hypot","s","sin","c","cos","b12","b20","b21","b22","slice","translate4","createWorker","self","buffer","viewProj","vertexCount","lastProj","depthIndex","Uint32Array","lastVertexCount","_floatView","Float32Array","_int32View","Int32Array","floatToHalf","float","newExp","f","exp","frac","packHalf2x16","runSort","f_buffer","dot","abs","u_buffer","Uint8Array","texwidth","texheight","ceil","texdata","texdata_c","texdata_f","i","scale","rot","M","map","k","floor","sigma","postMessage","generateTexture","console","time","maxDepth","minDepth","Infinity","sizeList","depth","depthInv","counts0","starts0","timeEnd","throttledSort","sortRunning","lastView","setTimeout","onmessage","e","data","ply","inputBuffer","ubuf","header","TextDecoder","decode","header_end_index","indexOf","Error","parseInt","exec","log","row_offset","offsets","types","TYPE_MAP","double","int","uint","short","ushort","uchar","prop","split","filter","startsWith","p","type","name","arrayType","replace","dataView","DataView","header_end","row","attrs","Proxy","get","target","sizeIndex","size","scale_0","scale_1","scale_2","opacity","sort","ArrayBuffer","j","scales","rgba","Uint8ClampedArray","qlen","sqrt","rot_0","rot_1","rot_2","rot_3","SH_C0","f_dc_0","f_dc_1","f_dc_2","red","green","blue","processPlyBuffer","byteLength","view","vertexShaderSource","trim","fragmentShaderSource","viewMatrix","async","onDropdownChange","event","renderRoom","value","roomName","url","roomNameSelection","fetch","mode","credentials","fetchUrl","req","carousel","rowLength","reader","body","getReader","splatData","headers","downsample","length","devicePixelRatio","worker","Worker","URL","createObjectURL","Blob","toString","canvas","document","getElementById","fps","projectionMatrix","gl","getContext","antialias","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","error","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","useProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","disable","DEPTH_TEST","enable","BLEND","blendFuncSeparate","ONE_MINUS_DST_ALPHA","ONE","blendEquationSeparate","FUNC_ADD","u_projection","getUniformLocation","u_viewport","u_focal","u_view","triangleVertices","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","a_position","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texture","createTexture","bindTexture","TEXTURE_2D","u_textureLocation","uniform1i","indexBuffer","a_index","vertexAttribIPointer","INT","vertexAttribDivisor","resize","uniform2fv","innerWidth","innerHeight","round","viewport","uniformMatrix4fv","window","addEventListener","blob","link","createElement","download","href","appendChild","click","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA32UI","RGBA_INTEGER","UNSIGNED_INT","activeTexture","TEXTURE0","DYNAMIC_DRAW","joystickCenterX","joystickCenterY","activeKeys","includes","code","push","test","key","cameraIndex","warn","location","hash","JSON","stringify","preventDefault","deltaMode","inv","shiftKey","deltaX","deltaY","ctrlKey","metaKey","preY","d","passive","moveX","moveY","down","updateMovement","clientX","clientY","dx","dy","angle","atan2","joystick","style","transform","cameraForward","cameraRight","stopMovement","rect","getBoundingClientRect","left","top","touches","animate","newX","max","min","newY","newZ","requestAnimationFrame","startX","startY","isSwiping","swipeSpeedFactor","PI","lastSwipeDirection","handleSwipeStart","handleSwipeMove","currentX","currentY","currentRotationX","asin","maxRotationAngle","newRotationX","updateViewMatrix","handleSwipeEnd","mouseStartX","mouseStartY","isMouseSwiping","mouseLastSwipeDirection","button","altX","altY","leftGamepadTrigger","rightGamepadTrigger","jumpDelta","lastFrame","avgFps","start","gp","navigator","getGamepads","gamepad","index","buttons","axes","frame","now","gamepads","isJumping","axisThreshold","moveSpeed","rotateSpeed","pressed","tiltAxis","some","inv2","actualViewMatrix","display","clear","COLOR_BUFFER_BIT","drawArraysInstanced","TRIANGLE_FAN","Date","progress","innerText","parse","decodeURIComponent","err","stopPropagation","file","fr","FileReader","onload","result","readAsText","stopLoading","readAsArrayBuffer","selectFile","dataTransfer","files","bytesRead","done","read","set","handleRendering","querySelectorAll","forEach","querySelector","textContent","dropdown","_","room_name","optionElement","populateDropdown","startup","main","catch"],"sourceRoot":""}